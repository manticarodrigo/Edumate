{"version":3,"sources":["../../src/pages/schedule/schedule.module.ts","../../src/pages/schedule/schedule.ts"],"names":[],"mappings":"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","file":"3.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { SchedulePage } from './schedule';\n\n@NgModule({\n  declarations: [\n    SchedulePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SchedulePage),\n  ],\n  exports: [\n    SchedulePage\n  ]\n})\nexport class ScheduleModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/schedule/schedule.module.ts","import { Component, ViewChild } from '@angular/core';\nimport { IonicPage, NavController, NavParams, App, ItemSliding, List, ModalController, AlertController, LoadingController, FabContainer, ToastController, Refresher } from 'ionic-angular';\n\nimport { AuthProvider } from '../../providers/auth/auth';\nimport { TaskProvider } from '../../providers/task/task';\n\nimport { ConferenceData } from '../../providers/conference-data';\nimport { UserData } from '../../providers/user-data';\n\n@IonicPage({\n  name: 'schedule'\n})\n@Component({\n  selector: 'page-schedule',\n  templateUrl: 'schedule.html',\n})\nexport class SchedulePage {\n  // the list is a child of the schedule page\n  // @ViewChild('scheduleList') gets a reference to the list\n  // with the variable #scheduleList, `read: List` tells it to return\n  // the List and not a reference to the element\n  @ViewChild('scheduleList', { read: List }) scheduleList: List;\n\n  segment = 'upcoming';\n  tasks: any;\n  loading: any;\n  dayIndex = 0;\n  queryText = '';\n  excludeTracks: any = [];\n  shownCourses: any = [];\n  groups: any = [];\n  confDate: string;\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public alertCtrl: AlertController,\n    public app: App,\n    public loadingCtrl: LoadingController,\n    public modalCtrl: ModalController,\n    public toastCtrl: ToastController,\n    public confData: ConferenceData,\n    public user: UserData,\n    public authProvider: AuthProvider,\n    public taskProvider: TaskProvider\n  ) {\n    this.taskProvider.getTasks()\n    .then(data => {\n      console.log(data);\n      this.tasks = data;\n    }, (err) => {\n      console.log(err);\n    });\n  }\n\n  ionViewDidLoad() {\n    this.app.setTitle('Schedule');\n    this.updateSchedule();\n  }\n\n  updateSchedule() {\n    // Close any open sliding items when the schedule updates\n    this.scheduleList && this.scheduleList.closeSlidingItems();\n\n    this.confData.getTimeline(this.dayIndex, this.queryText, this.excludeTracks, this.segment).subscribe((data: any) => {\n      this.shownCourses = data.shownCourses;\n      this.groups = data.groups;\n    });\n  }\n\n  openTask(task) {\n    let modal = this.modalCtrl.create('task', {\n      task: task\n    });\n    modal.onDidDismiss(task => {\n      if (task) {\n        this.showLoader();\n        this.taskProvider.createTask(task)\n        .then(result => {\n          this.loading.dismiss();\n          this.tasks = result;\n        }, (err) => {\n          this.loading.dismiss();\n          console.log(err);\n        });\n      }\n    });\n    modal.present();\n  }\n \n  addTask() {\n    let modal = this.modalCtrl.create('task');\n    modal.onDidDismiss(task => {\n      if (task) {\n        this.showLoader();\n        this.taskProvider.createTask(task)\n        .then(result => {\n          this.loading.dismiss();\n          this.tasks = result;\n        }, (err) => {\n          this.loading.dismiss();\n          console.log(err);\n        });\n      }\n    });\n    modal.present();\n  }\n \n  deleteTask(task) {\n    this.showLoader();\n    // Remove from database\n    this.taskProvider.deleteTask(task._id).then(result => {\n      this.loading.dismiss();\n      // Remove locally\n      let index = this.tasks.indexOf(task);\n      if (index > -1) {\n        this.tasks.splice(index, 1);\n      }\n    }, (err) => {\n      this.loading.dismiss();\n      console.log(err);\n    });\n  }\n \n  showLoader() {\n    this.loading = this.loadingCtrl.create({\n      content: 'Please wait...'\n    });\n    this.loading.present();\n  }\n\n  presentFilter() {\n    let modal = this.modalCtrl.create('schedule-settings', this.excludeTracks);\n    modal.present();\n\n    modal.onWillDismiss((data: any[]) => {\n      if (data) {\n        this.excludeTracks = data;\n        this.updateSchedule();\n      }\n    });\n\n  }\n\n  goToCourseDetail(course: any) {\n    // go to the course detail page\n    // and pass in the course data\n    let modal = this.modalCtrl.create('course-detail', {course: course});\n    modal.present();\n  }\n\n  addFavorite(slidingItem: ItemSliding, courseData: any) {\n\n    if (this.user.hasFavorite(courseData.name)) {\n      // woops, they already favorited it! What shall we do!?\n      // prompt them to remove it\n      this.removeFavorite(slidingItem, courseData, 'Favorite already added');\n    } else {\n      // remember this course as a user favorite\n      this.user.addFavorite(courseData.name);\n\n      // create an alert instance\n      let alert = this.alertCtrl.create({\n        title: 'Favorite Added',\n        buttons: [{\n          text: 'OK',\n          handler: () => {\n            // close the sliding item\n            slidingItem.close();\n          }\n        }]\n      });\n      // now present the alert on top of all other content\n      alert.present();\n    }\n\n  }\n\n  removeFavorite(slidingItem: ItemSliding, courseData: any, title: string) {\n    let alert = this.alertCtrl.create({\n      title: title,\n      message: 'Would you like to remove this course from your favorites?',\n      buttons: [\n        {\n          text: 'Cancel',\n          handler: () => {\n            // they clicked the cancel button, do not remove the course\n            // close the sliding item and hide the option buttons\n            slidingItem.close();\n          }\n        },\n        {\n          text: 'Remove',\n          handler: () => {\n            // they want to remove this course from their favorites\n            this.user.removeFavorite(courseData.name);\n            this.updateSchedule();\n\n            // close the sliding item and hide the option buttons\n            slidingItem.close();\n          }\n        }\n      ]\n    });\n    // now present the alert on top of all other content\n    alert.present();\n  }\n\n  openSocial(network: string, fab: FabContainer) {\n    let loading = this.loadingCtrl.create({\n      content: `Posting to ${network}`,\n      duration: (Math.random() * 1000) + 500\n    });\n    loading.onWillDismiss(() => {\n      fab.close();\n    });\n    loading.present();\n  }\n\n  doRefresh(refresher: Refresher) {\n    this.confData.getTimeline(this.dayIndex, this.queryText, this.excludeTracks, this.segment).subscribe((data: any) => {\n      this.shownCourses = data.shownCourses;\n      this.groups = data.groups;\n\n      // simulate a network request that would take longer\n      // than just pulling from out local json file\n      setTimeout(() => {\n        refresher.complete();\n\n        const toast = this.toastCtrl.create({\n          message: 'Courses have been updated.',\n          duration: 3000\n        });\n        toast.present();\n      }, 1000);\n    });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/schedule/schedule.ts"],"sourceRoot":""}